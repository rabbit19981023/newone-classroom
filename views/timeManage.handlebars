<div class="container">
  <div class="select-wrapper">
    <label>教室：</label>
    <select onchange="location.href = '/admin/rooms/time/{{ mode.string }}/' + this.value">
      <option value="">請選擇教室</option>

      {{#each rooms as | room | }}
        <option value="{{ room }}">{{ room }}</option>
      {{/each}}

    </select>
  </div>

  <form action="/admin/rooms/time/{{ mode.string }}/{{ roomName }}" method="POST">
    <div class="table-wrapper">
      <table class="caption-top">
        <caption> {{ roomName }}教室 時段表 </caption>

        <thead>
          <tr>
            <th>時段</th>

            {{#each timeData.weeks as | week | }}
              <th>{{ week }}</th>
            {{/each}}

          </tr>
        </thead>

        <tbody>
          {{#each data as | weeks time | }}
            <tr>
              <td>{{ time }}</td>

              {{#each weeks as | status week | }}
                {{#if status}}
                  <td>
                    <input type="checkbox" name="room_time" value="{{ week }},{{ time }}">
                  </td>
                {{else}}
                  <td>
                    <input type="checkbox" disabled>
                  </td>
                {{/if}}
              {{/each}}
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>

    {{#if roomName}}
      {{#if mode.add}}
        <button type="submit">新增時段</button>
      {{/if}}
    {{/if}}

    {{#if roomName}}
      {{#if mode.delete}}
        <button type="submit">刪除時段</button>
      {{/if}}
    {{/if}}
  </form>
</div>


{{#if mode.add}}
  {{#extend 'title'}}
    <title>教室借用系統 - 新增時段</title>
  {{/extend}}
{{/if}}

{{#if mode.delete}}
  {{#extend 'title'}}
    <title>教室借用系統 - 刪除時段</title>
  {{/extend}}
{{/if}}

{{#extend 'css'}}
  <link rel="stylesheet" href="/css/time-table.css">
{{/extend}}

{{#extend 'scripts'}}
  <script src="/js/time-table.js"></script>
{{/extend}}

{{#if mode.add}}
  <script>
    const navLink = document.querySelector('.times-add')
    navLink.classList.add('active')
  </script>
{{/if}}

{{#if mode.delete}}
  <script>
    const navLink = document.querySelector('.times-delete')
    navLink.classList.add('active')
  </script>
{{/if}}